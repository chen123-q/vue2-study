<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>依赖收集与异步更新</title>
</head>

<body>
    <!-- 给模板中的属性增加一个收集器 dep -->
    <!-- 页面渲染的时候将渲染逻辑封装到 watcher 中  vm._update(vm._render())-->
    <!-- 让dep记住这个watcher 稍后属性变化了可以找到对应的dep中存放的 watcher 进行重新渲染-->
    <!-- 观察者模式 -->

    <div id="app">
        {{name}}
        <hr>
        <!-- {{arr}} -->
    </div>
    <script src="../dist/vue.js"></script>

    <script>
        const vm = new Vue({
            el: '#app',
            data() {
                return {
                    name: 'cx',
                    age: 25,
                    address: {
                        num: 5
                    },

                }
            },
        })


        // setTimeout(() => {
        //     vm.name = '小明'
        //     vm.age = '18'
        //     vm.address = 5
        //     vm.name = '小红'
        // }, 2000);

        // nextTick不是创建了一个异步任务将任务维护到队列
        vm.name = 'xiaoming'
        console.log(11, app.innerHTML);
        vm.$nextTick(() => {
            console.log(22, app.innerHTML);
        })


        // 1. 观察者模式实现依赖收集
        // 2. 异步更新策略


    </script>
</body>

</html>